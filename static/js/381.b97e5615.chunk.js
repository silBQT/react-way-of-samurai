"use strict";(self.webpackChunksocial_network_app=self.webpackChunksocial_network_app||[]).push([[381],{1548:(s,e,r)=>{r.d(e,{D:()=>n});r(2791);var t=r(4420),o=r(7689),i=r(184);let a=s=>({isAuth:s.auth.isAuth});const n=s=>(0,t.$j)(a)((e=>e.isAuth?(0,i.jsx)(s,{...e}):(0,i.jsx)(o.Fg,{to:"/login"})))},4381:(s,e,r)=>{r.r(e),r.d(e,{default:()=>z});var t=r(2791),o=r(4420);const i={profile_info__banner:"ProfileInfo_profile_info__banner__teem6",profile_info__wrapper:"ProfileInfo_profile_info__wrapper__Xu5+R",profile_info__pic:"ProfileInfo_profile_info__pic__dEWGu",profile_info__content:"ProfileInfo_profile_info__content__hsN-j",profile_info__name:"ProfileInfo_profile_info__name__pBezn"};var a=r(4010),n=r(6939),l=r(184);const p=s=>{const[e,r]=(0,t.useState)(s.status),[o,i]=(0,t.useState)(!1);(0,t.useEffect)((()=>{r(s.status)}),[s.status]);return o?(0,l.jsx)("div",{children:(0,l.jsx)("input",{onChange:s=>{r(s.target.value)},onBlur:()=>{i(!1),s.updateUserStatus(e)},autoFocus:!0,value:e})}):(0,l.jsx)("div",{children:(0,l.jsx)("span",{onDoubleClick:()=>{i(!0)},children:s.status||"\u041d\u0435\u0442 \u0441\u0442\u0430\u0442\u0443\u0441\u0430"})})},u=s=>s.profile?(0,l.jsxs)("div",{className:i.profile_info,children:[(0,l.jsx)("img",{className:i.profile_info__banner,src:"https://pixelbox.ru/wp-content/uploads/2021/10/banner-twitch-anime-pixelbox.ru-10-scaled.jpg",alt:"profile_banner"}),(0,l.jsxs)("div",{className:i.profile_info__wrapper,children:[(0,l.jsxs)("div",{className:i.profile_info__pic,children:[(0,l.jsx)("img",{src:s.profile.photos.large||n.Z,alt:"profile_pic"}),s.isOwner&&(0,l.jsx)("input",{type:"file",onChange:e=>{e.target.files.length&&s.saveUserImage(e.target.files[0])}})]}),(0,l.jsxs)("div",{className:i.profile_info__content,children:[(0,l.jsx)("span",{className:i.profile_info__name,children:s.profile.fullName}),(0,l.jsx)(p,{status:s.status,updateUserStatus:s.updateUserStatus}),null!=s.profile.aboutMe&&"\u041e \u0441\u0435\u0431\u0435: ".concat(s.profile.aboutMe)," ",(0,l.jsx)("br",{})]})]})]}):(0,l.jsx)(a.Z,{}),_={};var c=r(6070);const d="Posts_posts__FKzX6",f="Posts_posts__wrapper__5FSDX",h="Post_post__W92pf",m="Post_post__body__uhr0l",j="Post_post__info__GXva1",x=s=>(0,l.jsxs)("div",{className:h,children:[(0,l.jsxs)("div",{className:m,children:[(0,l.jsx)("img",{src:"https://bigpicture.ru/wp-content/uploads/2022/06/bigpicture_ru_bez-nazvanija-2022-06-24t183807.456.jpg",alt:"profile_pic"}),s.body]}),(0,l.jsxs)("div",{className:j,children:["Likes: ",s.likesCount,(0,l.jsx)("button",{children:"Like"})]})]});var g=r(1154),v=r(6139),b=r(5304),P=r(5530);const w=(0,b.D)(50),I=s=>(0,l.jsxs)("form",{onSubmit:s.handleSubmit,children:[(0,l.jsx)(v.Z,{component:P.g,validate:[b.C,w],name:"newPostBody",placeholder:"your news..."}),(0,l.jsx)("button",{children:"Add post"})]});var U=r(704);const C=(0,g.qC)((0,U.Z)({form:"profileAddPostForm"}))(I),k=t.memo((s=>{let e=s.posts.map((s=>(0,l.jsx)(x,{id:s.id,body:s.body,likesCount:s.likesCount},s.id)));return(0,l.jsxs)("div",{className:d,children:[(0,l.jsx)("h2",{children:"My posts"}),(0,l.jsx)(C,{onSubmit:e=>{s.addPost(e.newPostBody)}}),(0,l.jsx)("div",{className:f,children:e})]})}));const N=(0,o.$j)((s=>({posts:s.profilePage.posts})),{addPost:c.q2})(k),S=s=>(0,l.jsxs)("div",{className:_.profile,children:[(0,l.jsx)(u,{profile:s.profile,status:s.status,updateUserStatus:s.updateUserStatus,saveUserImage:s.saveUserImage,isOwner:s.isOwner}),(0,l.jsx)(N,{})]});var y=r(2055),D=r(1548);class F extends t.Component{refreshProfile(){let s=this.props.router.params.userId;s||(s=this.props.authorizedUserId,s||this.props.history.push("/login")),this.props.getUserProfile(s),this.props.getUserStatus(s)}componentDidMount(){this.refreshProfile()}componentDidUpdate(s,e){s.router.params.userId!==this.props.router.params.userId&&this.refreshProfile()}checkIsOwner(){let{userId:s}=this.props.router.params,{authorizedUserId:e}=this.props;return!s||+s===e}render(){return(0,l.jsx)(S,{...this.props,isOwner:this.checkIsOwner()})}}const z=(0,g.qC)((0,o.$j)((s=>({profile:s.profilePage.profile,status:s.profilePage.status,isAuth:s.auth.isAuth,authorizedUserId:s.auth.userId})),{getUserProfile:c.et,getUserStatus:c.Tq,updateUserStatus:c.OL,saveUserImage:c.Lk}),y.Z,D.D)(F)},5530:(s,e,r)=>{r.d(e,{I:()=>l,g:()=>n});const t="FormsControls_formControl__JXR2U",o="FormsControls_error__gRq-8";var i=r(184);const a=s=>e=>{let{input:r,meta:a,...n}=e;const l=a.error&&a.touched;return(0,i.jsxs)("div",{className:"".concat(t," ").concat(l&&o),children:[(0,i.jsx)(s,{...r,...n}),l&&(0,i.jsx)("div",{children:a.error})]})},n=a("textarea"),l=a("input")},5304:(s,e,r)=>{r.d(e,{C:()=>t,D:()=>o});const t=s=>{if(!s)return"Field is required!"},o=s=>e=>{if(e.length>s)return"Max length is ".concat(s," symbols!")}}}]);
//# sourceMappingURL=381.b97e5615.chunk.js.map